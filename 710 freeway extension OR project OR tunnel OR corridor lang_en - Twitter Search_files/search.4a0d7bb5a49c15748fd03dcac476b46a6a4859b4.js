define("app/ui/dialogs/search_operators_dialog",["module","require","exports","core/component","app/ui/with_dialog"],function(module, require, exports) {
function searchOperatorsDialog(){this.defaultAttrs({searchOperatorsLinkSelector:".search-operators-link"}),this.after("initialize",function(){this.on(document,"click",{searchOperatorsLinkSelector:this.open})})}var defineComponent=require("core/component"),withDialog=require("app/ui/with_dialog");module.exports=defineComponent(searchOperatorsDialog,withDialog)
});
define("app/pages/search/home",["module","require","exports","app/boot/app","app/boot/trends","app/ui/search_input","app/ui/typeahead/typeahead_dropdown","app/ui/typeahead/typeahead_input","app/data/search_input_scribe","app/ui/dialogs/search_operators_dialog","core/utils"],function(module, require, exports) {
var bootApp=require("app/boot/app"),trends=require("app/boot/trends"),SearchInput=require("app/ui/search_input"),TypeaheadDropdown=require("app/ui/typeahead/typeahead_dropdown"),TypeaheadInput=require("app/ui/typeahead/typeahead_input"),SearchInputScribe=require("app/data/search_input_scribe"),SearchOperatorsDialog=require("app/ui/dialogs/search_operators_dialog"),utils=require("core/utils");module.exports=function(b){bootApp(b),trends(utils.merge(b,{src:"search-home",show_context:!1})),SearchInput.attachTo("#search-home-form",utils.merge(b,{magnifyingGlassSelector:".search-btn",inputFieldSelector:"#search-home-input",eventData:{scribeContext:{component:"search_home_searchbox",element:""}}})),SearchInputScribe.attachTo("#search-home-form",{noTeardown:!0}),TypeaheadInput.attachTo("#search-home-form",{inputSelector:"#search-home-input"}),TypeaheadDropdown.attachTo("#search-home-form",{inputSelector:"#search-home-input",nextElementSelector:".search-btn",accountsShortcutShow:!0,autocompleteAccounts:!1,typeaheadSrc:"SEARCH_BOX",datasourceRenders:[["recentSearches",["recentSearches"]],["savedSearches",["savedSearches"]],["topics",["topics"]],["accounts",["accounts"]]],deciders:utils.merge(b.typeaheadData,{showSocialContext:b.typeaheadData.showSearchAccountSocialContext}),eventData:{scribeContext:{component:"search_home_searchbox",element:"typeahead"}}}),SearchOperatorsDialog.attachTo("#search-operators-dialog"),$("#search-home-input").focus()}
});
deferred('$lib/bootstrap_datepicker.js', function() {
(function($,a){function c(){return new Date(Date.UTC.apply(Date,arguments))}function d(){var a=new Date;return c(a.getFullYear(),a.getMonth(),a.getDate())}function e(a){return function(){return this[a].apply(this,arguments)}}function i(a,b){function g(_,a){return a.toLowerCase()}var c=$(a).data(),d={},e,f=new RegExp("^"+b.toLowerCase()+"([A-Z])");b=new RegExp("^"+b.toLowerCase());for(var h in c)b.test(h)&&(e=h.replace(f,g),d[e]=c[h]);return d}function j(a){var b={};if(!n[a]){a=a.split("-")[0];if(!n[a])return}var c=n[a];return $.each(m,function(a,d){d in c&&(b[d]=c[d])}),b}var b=$(window),f=function(){var a={get:function(a){return this.slice(a)[0]},contains:function(a){var b=a&&a.valueOf();for(var c=0,d=this.length;c<d;c++)if(this[c].valueOf()===b)return c;return-1},remove:function(a){this.splice(a,1)},replace:function(a){if(!a)return;$.isArray(a)||(a=[a]),this.clear(),this.push.apply(this,a)},clear:function(){this.splice(0)},copy:function(){var a=new f;return a.replace(this),a}};return function(){var b=[];return b.push.apply(b,arguments),$.extend(b,a),b}}(),g=function(a,b){this.dates=new f,this.viewDate=d(),this.focusDate=null,this._process_options(b),this.element=$(a),this.isInline=!1,this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on, .input-group-addon, .btn"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&this.component.length===0&&(this.component=!1),this.picker=$(o.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(a,b){return parseInt(b)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};g.prototype={constructor:g,_process_options:function(a){this._o=$.extend({},this._o,a);var b=this.o=$.extend({},this._o),c=b.language;n[c]||(c=c.split("-")[0],n[c]||(c=l.language)),b.language=c;switch(b.startView){case 2:case"decade":b.startView=2;break;case 1:case"year":b.startView=1;break;default:b.startView=0}switch(b.minViewMode){case 1:case"months":b.minViewMode=1;break;case 2:case"years":b.minViewMode=2;break;default:b.minViewMode=0}b.startView=Math.max(b.startView,b.minViewMode),b.multidate!==!0&&(b.multidate=Number(b.multidate)||!1,b.multidate!==!1?b.multidate=Math.max(0,b.multidate):b.multidate=1),b.multidateSeparator=String(b.multidateSeparator),b.weekStart%=7,b.weekEnd=(b.weekStart+6)%7;var d=o.parseFormat(b.format);b.startDate!==-Infinity&&(b.startDate?b.startDate instanceof Date?b.startDate=this._local_to_utc(this._zero_time(b.startDate)):b.startDate=o.parseDate(b.startDate,d,b.language):b.startDate=-Infinity),b.endDate!==Infinity&&(b.endDate?b.endDate instanceof Date?b.endDate=this._local_to_utc(this._zero_time(b.endDate)):b.endDate=o.parseDate(b.endDate,d,b.language):b.endDate=Infinity),b.daysOfWeekDisabled=b.daysOfWeekDisabled||[],$.isArray(b.daysOfWeekDisabled)||(b.daysOfWeekDisabled=b.daysOfWeekDisabled.split(/[,\s]*/)),b.daysOfWeekDisabled=$.map(b.daysOfWeekDisabled,function(a){return parseInt(a,10)});var e=String(b.orientation).toLowerCase().split(/\s+/g),f=b.orientation.toLowerCase();e=$.grep(e,function(a){return/^auto|left|right|top|bottom$/.test(a)}),b.orientation={x:"auto",y:"auto"};if(!!f&&f!=="auto")if(e.length===1)switch(e[0]){case"top":case"bottom":b.orientation.y=e[0];break;case"left":case"right":b.orientation.x=e[0]}else f=$.grep(e,function(a){return/^left|right$/.test(a)}),b.orientation.x=f[0]||"auto",f=$.grep(e,function(a){return/^top|bottom$/.test(a)}),b.orientation.y=f[0]||"auto"},_events:[],_secondaryEvents:[],_applyEvents:function(b){for(var c=0,d,e,f;c<b.length;c++)d=b[c][0],b[c].length===2?(e=a,f=b[c][1]):b[c].length===3&&(e=b[c][1],f=b[c][2]),d.on(f,e)},_unapplyEvents:function(b){for(var c=0,d,e,f;c<b.length;c++)d=b[c][0],b[c].length===2?(f=a,e=b[c][1]):b[c].length===3&&(f=b[c][1],e=b[c][2]),d.off(e,f)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:$.proxy(this.show,this),keyup:$.proxy(function(a){$.inArray(a.keyCode,[27,37,39,38,40,32,13,9])===-1&&this.update()},this),keydown:$.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:$.proxy(this.show,this),keyup:$.proxy(function(a){$.inArray(a.keyCode,[27,37,39,38,40,32,13,9])===-1&&this.update()},this),keydown:$.proxy(this.keydown,this)}],[this.component,{click:$.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:$.proxy(this.show,this)}]],this._events.push([this.element,"*",{blur:$.proxy(function(a){this._focused_from=a.target},this)}],[this.element,{blur:$.proxy(function(a){this._focused_from=a.target},this)}]),this._secondaryEvents=[[this.picker,{click:$.proxy(this.click,this)}],[$(window),{resize:$.proxy(this.place,this)}],[$(document),{"mousedown touchstart":$.proxy(function(a){this.element.is(a.target)||this.element.find(a.target).length||this.picker.is(a.target)||this.picker.find(a.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(a,b){var c=b||this.dates.get(-1),d=this._utc_to_local(c);this.element.trigger({type:a,date:d,dates:$.map(this.dates,this._utc_to_local),format:$.proxy(function(a,b){arguments.length===0?(a=this.dates.length-1,b=this.o.format):typeof a=="string"&&(b=a,a=this.dates.length-1),b=b||this.o.format;var c=this.dates.get(a);return o.formatDate(c,b,this.o.language)},this)})},show:function(){this.isInline||this.picker.appendTo("body"),this.picker.show(),this.place(),this._attachSecondaryEvents(),this._trigger("show")},hide:function(){if(this.isInline)return;if(!this.picker.is(":visible"))return;this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide")},remove:function(){this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date},_utc_to_local:function(a){return a&&new Date(a.getTime()+a.getTimezoneOffset()*6e4)},_local_to_utc:function(a){return a&&new Date(a.getTime()-a.getTimezoneOffset()*6e4)},_zero_time:function(a){return a&&new Date(a.getFullYear(),a.getMonth(),a.getDate())},_zero_utc_time:function(a){return a&&new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()))},getDates:function(){return $.map(this.dates,this._utc_to_local)},getUTCDates:function(){return $.map(this.dates,function(a){return new Date(a)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){return new Date(this.dates.get(-1))},setDates:function(){var a=$.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,a),this._trigger("changeDate"),this.setValue()},setUTCDates:function(){var a=$.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,$.map(a,this._utc_to_local)),this._trigger("changeDate"),this.setValue()},setDate:e("setDates"),setUTCDate:e("setUTCDates"),setValue:function(){var a=this.getFormattedDate();this.isInput?this.element.val(a).change():this.component&&this.element.find("input").val(a).change()},getFormattedDate:function(b){b===a&&(b=this.o.format);var c=this.o.language;return $.map(this.dates,function(a){return o.formatDate(a,b,c)}).join(this.o.multidateSeparator)},setStartDate:function(a){this._process_options({startDate:a}),this.update(),this.updateNavArrows()},setEndDate:function(a){this._process_options({endDate:a}),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(a){this._process_options({daysOfWeekDisabled:a}),this.update(),this.updateNavArrows()},place:function(){if(this.isInline)return;var a=this.picker.outerWidth(),c=this.picker.outerHeight(),d=10,e=b.width(),f=b.height(),g=b.scrollTop(),h=parseInt(this.element.parents().filter(function(){return $(this).css("z-index")!=="auto"}).first().css("z-index"))+10,i=this.component?this.component.parent().offset():this.element.offset(),j=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),k=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),l=i.left,m=i.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),this.o.orientation.x!=="auto"?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),this.o.orientation.x==="right"&&(l-=a-k)):(this.picker.addClass("datepicker-orient-left"),i.left<0?l-=i.left-d:i.left+a>e&&(l=e-a-d));var n=this.o.orientation.y,o,p;n==="auto"&&(o=-g+i.top-c,p=g+f-(i.top+j+c),Math.max(o,p)===p?n="top":n="bottom"),this.picker.addClass("datepicker-orient-"+n),n==="top"?m+=j:m-=c+parseInt(this.picker.css("padding-top")),this.picker.css({top:m,left:l,zIndex:h})},_allow_update:!0,update:function(){if(!this._allow_update)return;var a=this.dates.copy(),b=[],c=!1;arguments.length?($.each(arguments,$.proxy(function(a,c){c instanceof Date&&(c=this._local_to_utc(c)),b.push(c)},this)),c=!0):(b=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),b&&this.o.multidate?b=b.split(this.o.multidateSeparator):b=[b],delete this.element.data().date),b=$.map(b,$.proxy(function(a){return o.parseDate(a,this.o.format,this.o.language)},this)),b=$.grep(b,$.proxy(function(a){return a<this.o.startDate||a>this.o.endDate||!a},this),!0),this.dates.replace(b),this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate&&(this.viewDate=new Date(this.o.endDate)),c?this.setValue():b.length&&String(a)!==String(this.dates)&&this._trigger("changeDate"),!this.dates.length&&a.length&&this._trigger("clearDate"),this.fill()},fillDow:function(){var a=this.o.weekStart,b="<tr>";if(this.o.calendarWeeks){var c='<th class="cw">&nbsp;</th>';b+=c,this.picker.find(".datepicker-days thead tr:first-child").prepend(c)}while(a<this.o.weekStart+7)b+='<th class="dow">'+n[this.o.language].daysMin[a++%7]+"</th>";b+="</tr>",this.picker.find(".datepicker-days thead").append(b)},fillMonths:function(){var a="",b=0;while(b<12)a+='<span class="month">'+n[this.o.language].monthsShort[b++]+"</span>";this.picker.find(".datepicker-months td").html(a)},setRange:function(a){!a||!a.length?delete this.range:this.range=$.map(a,function(a){return a.valueOf()}),this.fill()},getClassNames:function(a){var b=[],c=this.viewDate.getUTCFullYear(),d=this.viewDate.getUTCMonth(),e=new Date;return a.getUTCFullYear()<c||a.getUTCFullYear()===c&&a.getUTCMonth()<d?b.push("old"):(a.getUTCFullYear()>c||a.getUTCFullYear()===c&&a.getUTCMonth()>d)&&b.push("new"),this.focusDate&&a.valueOf()===this.focusDate.valueOf()&&b.push("focused"),this.o.todayHighlight&&a.getUTCFullYear()===e.getFullYear()&&a.getUTCMonth()===e.getMonth()&&a.getUTCDate()===e.getDate()&&b.push("today"),this.dates.contains(a)!==-1&&b.push("active"),(a.valueOf()<this.o.startDate||a.valueOf()>this.o.endDate||$.inArray(a.getUTCDay(),this.o.daysOfWeekDisabled)!==-1)&&b.push("disabled"),this.range&&(a>this.range[0]&&a<this.range[this.range.length-1]&&b.push("range"),$.inArray(a.valueOf(),this.range)!==-1&&b.push("selected")),b},fill:function(){var b=new Date(this.viewDate),d=b.getUTCFullYear(),e=b.getUTCMonth(),f=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,g=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,h=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,i=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,j=n[this.o.language].today||n.en.today||"",k=n[this.o.language].clear||n.en.clear||"",l;this.picker.find(".datepicker-days thead th.datepicker-switch").text(n[this.o.language].months[e]+" "+d),this.picker.find("tfoot th.today").text(j).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(k).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var m=c(d,e-1,28),p=o.getDaysInMonth(m.getUTCFullYear(),m.getUTCMonth());m.setUTCDate(p),m.setUTCDate(p-(m.getUTCDay()-this.o.weekStart+7)%7);var q=new Date(m);q.setUTCDate(q.getUTCDate()+42),q=q.valueOf();var r=[],s;while(m.valueOf()<q){if(m.getUTCDay()===this.o.weekStart){r.push("<tr>");if(this.o.calendarWeeks){var t=new Date(+m+(this.o.weekStart-m.getUTCDay()-7)%7*864e5),u=new Date(Number(t)+(11-t.getUTCDay())%7*864e5),v=new Date(Number(v=c(u.getUTCFullYear(),0,1))+(11-v.getUTCDay())%7*864e5),w=(u-v)/864e5/7+1;r.push('<td class="cw">'+w+"</td>")}}s=this.getClassNames(m),s.push("day");if(this.o.beforeShowDay!==$.noop){var x=this.o.beforeShowDay(this._utc_to_local(m));x===a?x={}:typeof x=="boolean"?x={enabled:x}:typeof x=="string"&&(x={classes:x}),x.enabled===!1&&s.push("disabled"),x.classes&&(s=s.concat(x.classes.split(/\s+/))),x.tooltip&&(l=x.tooltip)}s=$.unique(s),r.push('<td class="'+s.join(" ")+'"'+(l?' title="'+l+'"':"")+">"+m.getUTCDate()+"</td>"),m.getUTCDay()===this.o.weekEnd&&r.push("</tr>"),m.setUTCDate(m.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(r.join(""));var y=this.picker.find(".datepicker-months").find("th:eq(1)").text(d).end().find("span").removeClass("active");$.each(this.dates,function(a,b){b.getUTCFullYear()===d&&y.eq(b.getUTCMonth()).addClass("active")}),(d<f||d>h)&&y.addClass("disabled"),d===f&&y.slice(0,g).addClass("disabled"),d===h&&y.slice(i+1).addClass("disabled"),r="",d=parseInt(d/10,10)*10;var z=this.picker.find(".datepicker-years").find("th:eq(1)").text(d+"-"+(d+9)).end().find("td");d-=1;var A=$.map(this.dates,function(a){return a.getUTCFullYear()}),B;for(var C=-1;C<11;C++)B=["year"],C===-1?B.push("old"):C===10&&B.push("new"),$.inArray(d,A)!==-1&&B.push("active"),(d<f||d>h)&&B.push("disabled"),r+='<span class="'+B.join(" ")+'">'+d+"</span>",d+=1;z.html(r)},updateNavArrows:function(){if(!this._allow_update)return;var a=new Date(this.viewDate),b=a.getUTCFullYear(),c=a.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-Infinity&&b<=this.o.startDate.getUTCFullYear()&&c<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==Infinity&&b>=this.o.endDate.getUTCFullYear()&&c>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-Infinity&&b<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==Infinity&&b>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}},click:function(a){a.preventDefault();var b=$(a.target).closest("span, td, th"),d,e,f;if(b.length===1)switch(b[0].nodeName.toLowerCase()){case"th":switch(b[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var g=o.modes[this.viewMode].navStep*(b[0].className==="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,g),this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,g),this.viewMode===1&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":var h=new Date;h=c(h.getFullYear(),h.getMonth(),h.getDate(),0,0,0),this.showMode(-2);var i=this.o.todayBtn==="linked"?null:"view";this._setDate(h,i);break;case"clear":var j;this.isInput?j=this.element:this.component&&(j=this.element.find("input")),j&&j.val("").change(),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()}break;case"span":b.is(".disabled")||(this.viewDate.setUTCDate(1),b.is(".month")?(f=1,e=b.parent().find("span").index(b),d=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(e),this._trigger("changeMonth",this.viewDate),this.o.minViewMode===1&&this._setDate(c(d,e,f))):(f=1,e=0,d=parseInt(b.text(),10)||0,this.viewDate.setUTCFullYear(d),this._trigger("changeYear",this.viewDate),this.o.minViewMode===2&&this._setDate(c(d,e,f))),this.showMode(-1),this.fill());break;case"td":b.is(".day")&&!b.is(".disabled")&&(f=parseInt(b.text(),10)||1,d=this.viewDate.getUTCFullYear(),e=this.viewDate.getUTCMonth(),b.is(".old")?e===0?(e=11,d-=1):e-=1:b.is(".new")&&(e===11?(e=0,d+=1):e+=1),this._setDate(c(d,e,f)))}this.picker.is(":visible")&&this._focused_from&&$(this._focused_from).focus(),delete this._focused_from},_toggle_multidate:function(a){var b=this.dates.contains(a);a?b!==-1?this.dates.remove(b):this.dates.push(a):this.dates.clear();if(typeof this.o.multidate=="number")while(this.dates.length>this.o.multidate)this.dates.remove(0)},_setDate:function(a,b){(!b||b==="date")&&this._toggle_multidate(a&&new Date(a));if(!b||b==="view")this.viewDate=a&&new Date(a);this.fill(),this.setValue(),this._trigger("changeDate");var c;this.isInput?c=this.element:this.component&&(c=this.element.find("input")),c&&c.change(),this.o.autoclose&&(!b||b==="date")&&this.hide()},moveMonth:function(b,c){if(!b)return a;if(!c)return b;var d=new Date(b.valueOf()),e=d.getUTCDate(),f=d.getUTCMonth(),g=Math.abs(c),h,i;c=c>0?1:-1;if(g===1){i=c===-1?function(){return d.getUTCMonth()===f}:function(){return d.getUTCMonth()!==h},h=f+c,d.setUTCMonth(h);if(h<0||h>11)h=(h+12)%12}else{for(var j=0;j<g;j++)d=this.moveMonth(d,c);h=d.getUTCMonth(),d.setUTCDate(e),i=function(){return h!==d.getUTCMonth()}}while(i())d.setUTCDate(--e),d.setUTCMonth(h);return d},moveYear:function(a,b){return this.moveMonth(a,b*12)},dateWithinRange:function(a){return a>=this.o.startDate&&a<=this.o.endDate},keydown:function(a){if(this.picker.is(":not(:visible)")){a.keyCode===27&&this.show();return}var b=!1,c,e,f,g=this.focusDate||this.viewDate;switch(a.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),a.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;c=a.keyCode===37?-1:1,a.ctrlKey?(e=this.moveYear(this.dates.get(-1)||d(),c),f=this.moveYear(g,c),this._trigger("changeYear",this.viewDate)):a.shiftKey?(e=this.moveMonth(this.dates.get(-1)||d(),c),f=this.moveMonth(g,c),this._trigger("changeMonth",this.viewDate)):(e=new Date(this.dates.get(-1)||d()),e.setUTCDate(e.getUTCDate()+c),f=new Date(g),f.setUTCDate(g.getUTCDate()+c)),this.dateWithinRange(e)&&(this.focusDate=this.viewDate=f,this.setValue(),this.fill(),a.preventDefault());break;case 38:case 40:if(!this.o.keyboardNavigation)break;c=a.keyCode===38?-1:1,a.ctrlKey?(e=this.moveYear(this.dates.get(-1)||d(),c),f=this.moveYear(g,c),this._trigger("changeYear",this.viewDate)):a.shiftKey?(e=this.moveMonth(this.dates.get(-1)||d(),c),f=this.moveMonth(g,c),this._trigger("changeMonth",this.viewDate)):(e=new Date(this.dates.get(-1)||d()),e.setUTCDate(e.getUTCDate()+c*7),f=new Date(g),f.setUTCDate(g.getUTCDate()+c*7)),this.dateWithinRange(e)&&(this.focusDate=this.viewDate=f,this.setValue(),this.fill(),a.preventDefault());break;case 32:break;case 13:g=this.focusDate||this.dates.get(-1)||this.viewDate,this._toggle_multidate(g),b=!0,this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(a.preventDefault(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}if(b){this.dates.length?this._trigger("changeDate"):this._trigger("clearDate");var h;this.isInput?h=this.element:this.component&&(h=this.element.find("input")),h&&h.change()}},showMode:function(a){a&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+a))),this.picker.find(">div").hide().filter(".datepicker-"+o.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var h=function(a,b){this.element=$(a),this.inputs=$.map(b.inputs,function(a){return a.jquery?a[0]:a}),delete b.inputs,$(this.inputs).datepicker(b).bind("changeDate",$.proxy(this.dateUpdated,this)),this.pickers=$.map(this.inputs,function(a){return $(a).data("datepicker")}),this.updateDates()};h.prototype={updateDates:function(){this.dates=$.map(this.pickers,function(a){return a.getUTCDate()}),this.updateRanges()},updateRanges:function(){var a=$.map(this.dates,function(a){return a.valueOf()});$.each(this.pickers,function(b,c){c.setRange(a)})},dateUpdated:function(a){if(this.updating)return;this.updating=!0;var b=$(a.target).data("datepicker"),c=b.getUTCDate(),d=$.inArray(a.target,this.inputs),e=this.inputs.length;if(d===-1)return;$.each(this.pickers,function(a,b){b.getUTCDate()||b.setUTCDate(c)});if(c<this.dates[d])while(d>=0&&c<this.dates[d])this.pickers[d--].setUTCDate(c);else if(c>this.dates[d])while(d<e&&c>this.dates[d])this.pickers[d++].setUTCDate(c);this.updateDates(),delete this.updating},remove:function(){$.map(this.pickers,function(a){a.remove()}),delete this.element.data().datepicker}};var k=$.fn.datepicker;$.fn.datepicker=function(b){var c=Array.apply(null,arguments);c.shift();var d;return this.each(function(){var e=$(this),f=e.data("datepicker"),k=typeof b=="object"&&b;if(!f){var m=i(this,"date"),n=$.extend({},l,m,k),o=j(n.language),p=$.extend({},l,o,m,k);if(e.is(".input-daterange")||p.inputs){var q={inputs:p.inputs||e.find("input").toArray()};e.data("datepicker",f=new h(this,$.extend(p,q)))}else e.data("datepicker",f=new g(this,p))}if(typeof b=="string"&&typeof f[b]=="function"){d=f[b].apply(f,c);if(d!==a)return!1}}),d!==a?d:this};var l=$.fn.datepicker.defaults={autoclose:!1,beforeShowDay:$.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:Infinity,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-Infinity,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},m=$.fn.datepicker.locale_opts=["format","rtl","weekStart"];$.fn.datepicker.Constructor=g;var n=$.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},o={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(a){return a%4===0&&a%100!==0||a%400===0},getDaysInMonth:function(a,b){return[31,o.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(a){var b=a.replace(this.validParts,"\0").split("\0"),c=a.match(this.validParts);if(!b||!b.length||!c||c.length===0)throw new Error("Invalid date format.");return{separators:b,parts:c}},parseDate:function(b,d,e){function t(){var a=this.slice(0,h[k].length),b=h[k].slice(0,a.length);return a===b}if(!b)return a;if(b instanceof Date)return b;typeof d=="string"&&(d=o.parseFormat(d));var f=/([\-+]\d+)([dmwy])/,h=b.match(/([\-+]\d+)([dmwy])/g),i,j,k;if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(b)){b=new Date;for(k=0;k<h.length;k++){i=f.exec(h[k]),j=parseInt(i[1]);switch(i[2]){case"d":b.setUTCDate(b.getUTCDate()+j);break;case"m":b=g.prototype.moveMonth.call(g.prototype,b,j);break;case"w":b.setUTCDate(b.getUTCDate()+j*7);break;case"y":b=g.prototype.moveYear.call(g.prototype,b,j)}}return c(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),0,0,0)}h=b&&b.match(this.nonpunctuation)||[],b=new Date;var l={},m=["yyyy","yy","M","MM","m","mm","d","dd"],p={yyyy:function(a,b){return a.setUTCFullYear(b)},yy:function(a,b){return a.setUTCFullYear(2e3+b)},m:function(a,b){if(isNaN(a))return a;b-=1;while(b<0)b+=12;b%=12,a.setUTCMonth(b);while(a.getUTCMonth()!==b)a.setUTCDate(a.getUTCDate()-1);return a},d:function(a,b){return a.setUTCDate(b)}},q,r;p.M=p.MM=p.mm=p.m,p.dd=p.d,b=c(b.getFullYear(),b.getMonth(),b.getDate(),0,0,0);var s=d.parts.slice();h.length!==s.length&&(s=$(s).filter(function(a,b){return $.inArray(b,m)!==-1}).toArray());if(h.length===s.length){var u;for(k=0,u=s.length;k<u;k++){q=parseInt(h[k],10),i=s[k];if(isNaN(q))switch(i){case"MM":r=$(n[e].months).filter(t),q=$.inArray(r[0],n[e].months)+1;break;case"M":r=$(n[e].monthsShort).filter(t),q=$.inArray(r[0],n[e].monthsShort)+1}l[i]=q}var v,w;for(k=0;k<m.length;k++)w=m[k],w in l&&!isNaN(l[w])&&(v=new Date(b),p[w](v,l[w]),isNaN(v)||(b=v))}return b},formatDate:function(a,b,c){if(!a)return"";typeof b=="string"&&(b=o.parseFormat(b));var d={d:a.getUTCDate(),D:n[c].daysShort[a.getUTCDay()],DD:n[c].days[a.getUTCDay()],m:a.getUTCMonth()+1,M:n[c].monthsShort[a.getUTCMonth()],MM:n[c].months[a.getUTCMonth()],yy:a.getUTCFullYear().toString().substring(2),yyyy:a.getUTCFullYear()};d.dd=(d.d<10?"0":"")+d.d,d.mm=(d.m<10?"0":"")+d.m,a=[];var e=$.extend([],b.separators);for(var f=0,g=b.parts.length;f<=g;f++)e.length&&a.push(e.shift()),a.push(d[b.parts[f]]);return a.join("")},headTemplate:'<thead><tr><th class="prev">&laquo;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&raquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};o.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+o.headTemplate+"<tbody></tbody>"+o.footTemplate+"</table>"+"</div>"+'<div class="datepicker-months">'+'<table class="table-condensed">'+o.headTemplate+o.contTemplate+o.footTemplate+"</table>"+"</div>"+'<div class="datepicker-years">'+'<table class="table-condensed">'+o.headTemplate+o.contTemplate+o.footTemplate+"</table>"+"</div>"+"</div>",$.fn.datepicker.DPGlobal=o,$.fn.datepicker.noConflict=function(){return $.fn.datepicker=k,this},$(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(a){var b=$(this);if(b.data("datepicker"))return;a.preventDefault(),b.datepicker("show")}),$(function(){$('[data-provide="datepicker-inline"]').datepicker()})})(window.jQuery)
});
define("app/ui/with_bootstrap_datepicker",["module","require","exports","core/i18n","$lib/bootstrap_datepicker.js"],function(module, require, exports) {
function withBootstrapDatePicker(){var a=$("html").attr("lang"),b=$("body").attr("dir")==="rtl";$.fn.datepicker.dates[a]={days:[_('Sunday'),_('Monday'),_('Tuesday'),_('Wednesday'),_('Thursday'),_('Friday'),_('Saturday'),_('Sunday')],daysShort:[_('Sun'),_('Mon'),_('Tue'),_('Wed'),_('Thu'),_('Fri'),_('Sat'),_('Sun')],daysMin:[_('Su'),_('Mo'),_('Tu'),_('We'),_('Th'),_('Fr'),_('Sa'),_('Su')],months:[_('January'),_('February'),_('March'),_('April'),_('May'),_('June'),_('July'),_('August'),_('September'),_('October'),_('November'),_('December')],monthsShort:[_('Jan'),_('Feb'),_('Mar'),_('Apr'),_('May'),_('Jun'),_('Jul'),_('Aug'),_('Sep'),_('Oct'),_('Nov'),_('Dec')],today:_('Today'),clear:_('Clear'),rtl:b}}var _=require("core/i18n");require("$lib/bootstrap_datepicker.js"),module.exports=withBootstrapDatePicker
});
define("app/ui/advanced_search",["module","require","exports","core/component","core/utils","app/ui/geo_picker","app/ui/with_bootstrap_datepicker"],function(module, require, exports) {
function advancedSearch(){this.defaultAttrs({loggedIn:!1,language:$("html").attr("lang")||"en",searchButtonSelector:".primary-btn",searchFormSelector:".twitter-form",geoPickerSelector:".geo-picker",geoPickerParentSelector:".geo .txt",datePickerSelector:".input-daterange",sinceInputSelector:".input-since",untilInputSelector:".input-until"}),this.serializeAdvancedForm=function(){var a=this.select("searchFormSelector"),b=a.serializeArray(),c=[];return b.forEach(function(b){var d=b.value,e=a.find("select[name=within]").val()+a.find("input:radio[name=units]:checked").val();if(!d)return;switch(b.name){case"attd":case"ands":c.push(d);break;case"ors":var f=d.split(" "),g=this.sanitize(f);c.push(g.join(" OR "));break;case"phrase":c.push('"'+d+'"');break;case"nots":var f=("-"+d).split(" "),g=this.sanitize(f);c.push(g.join(" -"));break;case"tag":var f=("#"+d.replace(/#+/g,"")).split(" "),g=this.sanitize(f);c.push(g.join(" OR #"));break;case"from":var f=("from:"+d.replace(/@+/g,"")).split(" "),g=this.sanitize(f);c.push(g.join(" OR from:"));break;case"to":var f=("to:"+d.replace(/@+/g,"")).split(" "),g=this.sanitize(f);c.push(g.join(" OR to:"));break;case"ref":var f=("@"+d.replace(/@+/g,"")).split(" "),g=this.sanitize(f);c.push(g.join(" OR @"));break;case"near":c.push('near:"'+d+'" within:'+e);break;case"place_id":var h=a.find(".geo-picker .geo-status").text();c.push('near:"'+h+'" within:'+e);break;case"since":var i=this.getUTCyyyymmdd(this.select("sinceInputSelector").datepicker("getUTCDate"));c.push("since:"+i);break;case"until":var i=this.getUTCyyyymmdd(this.select("untilInputSelector").datepicker("getUTCDate"));c.push("until:"+i);break;case"include":c.push("include:retweets");break;case"lang":d!=="all"&&c.push("lang:"+d)}},this),c.join(" ").trim()},this.sanitize=function(a){return a.filter(function(a){return a!==""})},this.searchFormSubmit=function(a){a.preventDefault();var b=this.serializeAdvancedForm();b&&(this.trigger("uiSearchQuery",{query:b,source:"search"}),this.trigger("uiNavigate",{href:"/search?q="+encodeURIComponent(b)+"&src=typd"}))},this.initializeGeoPicker=function(){GeoPicker.attachTo(this.select("geoPickerSelector"),{parent:this.select("geoPickerParentSelector")}),this.trigger(this.select("geoPickerParentSelector"),"uiPrepareGeoPicker")},this.initializeDatePicker=function(){this.select("datePickerSelector").datepicker({format:"yyyy-mm-dd",startDate:"2006-03-21",endDate:new Date,autoclose:!0,todayHighlight:!0,language:this.attr.language})},this.setUntilMinDate=function(a){this.select("untilInputSelector").datepicker("setStartDate",a.date)},this.setSinceMaxDate=function(a){this.select("sinceInputSelector").datepicker("setEndDate",a.date)},this.getUTCyyyymmdd=function(a){var b=a.getUTCFullYear().toString(),c=(a.getUTCMonth()+1).toString(),d=c[1]?c:"0"+c[0],a=a.getUTCDate().toString(),e=a[1]?a:"0"+a[0];return b+"-"+d+"-"+e},this.after("initialize",function(){this.attr.loggedIn&&this.initializeGeoPicker(),this.initializeDatePicker(),this.on("click",{searchButtonSelector:this.searchFormSubmit}),this.on(this.select("searchFormSelector"),"submit",this.searchFormSubmit),this.on(this.select("sinceInputSelector").datepicker(),"changeDate",this.setUntilMinDate),this.on(this.select("untilInputSelector").datepicker(),"changeDate",this.setSinceMaxDate)})}var defineComponent=require("core/component"),utils=require("core/utils"),GeoPicker=require("app/ui/geo_picker"),withBootstrapDatePicker=require("app/ui/with_bootstrap_datepicker");module.exports=defineComponent(advancedSearch,withBootstrapDatePicker)
});
define("app/pages/search/advanced",["module","require","exports","app/boot/app","app/ui/advanced_search"],function(module, require, exports) {
var bootApp=require("app/boot/app"),AdvancedSearch=require("app/ui/advanced_search");module.exports=function(b){bootApp(b),AdvancedSearch.attachTo(".advanced-search",b)}
});